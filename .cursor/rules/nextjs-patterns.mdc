---
globs: app/**/*.tsx
alwaysApply: false
---

# Next.js 14 App Router Patterns

## Page Components
- Use `page.tsx` for route pages
- Use `layout.tsx` for shared layouts
- Use `error.tsx` for error boundaries
- Use `not-found.tsx` for 404 pages

## Route Groups
- Use route groups `(folder-name)` to organize routes without affecting URL structure
- Example: `app/(retail-catalog)/` groups retail catalog routes but they render at root level (`/`, `/[productSlug]`, etc.)
- Route groups are useful for code organization and shared layouts
- When importing from `app/` within route groups, use `~/` alias for cleaner imports

## Client vs Server Components
- Prefer `'use client'` directive for client components
- Use `'use server'` for Server Actions
- Server components by default in App Router

## Metadata & SEO
- Use Next.js Metadata API for page metadata
- Implement structured data (JSON-LD) in layouts
- Use semantic HTML
- Implement sitemap (`app/sitemap.ts`)
- Use canonical URLs

## Performance
- Use Next.js Image component for images
- Implement lazy loading with `LazyImage` component
- Use `next/dynamic` for code splitting when needed
- Remove console.logs in production (configured in `next.config.js`)

## Security
- Never expose API keys in client components
- Use Server Actions for sensitive operations
- Security headers configured in `next.config.js`
